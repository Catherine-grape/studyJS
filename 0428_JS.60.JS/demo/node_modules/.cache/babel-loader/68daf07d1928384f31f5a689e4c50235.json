{"remainingRequest":"/Users/fivegl/Desktop/demo/node_modules/babel-loader/lib/index.js!/Users/fivegl/Desktop/demo/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/fivegl/Desktop/demo/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fivegl/Desktop/demo/src/pages/Customer/CustomList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fivegl/Desktop/demo/src/pages/Customer/CustomList.vue","mtime":1619532428000},{"path":"/Users/fivegl/Desktop/demo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fivegl/Desktop/demo/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fivegl/Desktop/demo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fivegl/Desktop/demo/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.search\";\nimport _defineProperty from \"/Users/fivegl/Desktop/demo/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { queryCustomList } from \"../../api/customer\";\nexport default {\n  data: function data() {\n    return {\n      result: null,\n      type: \"\",\n      search: \"\",\n      limit: 10,\n      page: 1,\n      loading: true\n    };\n  },\n  watch: _defineProperty({}, \"$route\", function $route(route) {\n    if (route.path.includes(\"/custom/list\")) {\n      this.loading = true;\n      this.page = 1;\n      this.type = \"\";\n      this.search = \"\";\n      this.queryData();\n    }\n  }),\n  methods: {\n    formatSex: function formatSex(item) {\n      return parseInt(item.sex) == 0 ? \"男\" : \"女\";\n    },\n    //=>向服务器发送请求，获取经过筛选后的数据\n    queryData: function queryData() {\n      var _this = this;\n\n      queryCustomList({\n        lx: this.$route.query.type || \"my\",\n        type: this.type,\n        search: this.search,\n        limit: this.limit,\n        page: this.page\n      }).then(function (result) {\n        _this.loading = false;\n        _this.result = result;\n      }).catch(function () {\n        _this.loading = false;\n        _this.result = {};\n      });\n    },\n    currentHandle: function currentHandle(page) {\n      this.loading = true;\n      this.page = page;\n      this.queryData();\n    },\n    handle: function handle() {\n      this.loading = true;\n      this.page = 1;\n      this.queryData();\n    },\n    handleCus: function handleCus(scope) {\n      console.log(scope.row);\n      this.$router.push({\n        path: '/custom/handle',\n        query: {\n          id: scope.row.id\n        }\n      });\n    }\n  },\n  created: function created() {\n    this.queryData();\n  }\n};",{"version":3,"sources":["CustomList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoDA,SAAA,eAAA;AACA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,MAAA,EAAA,IADA;AAEA,MAAA,IAAA,EAAA,EAFA;AAGA,MAAA,MAAA,EAAA,EAHA;AAIA,MAAA,KAAA,EAAA,EAJA;AAKA,MAAA,IAAA,EAAA,CALA;AAMA,MAAA,OAAA,EAAA;AANA,KAAA;AAQA,GAVA;AAWA,EAAA,KAAA,sBACA,QADA,kBACA,KADA,EACA;AACA,QAAA,KAAA,CAAA,IAAA,CAAA,QAAA,CAAA,cAAA,CAAA,EAAA;AACA,WAAA,OAAA,GAAA,IAAA;AACA,WAAA,IAAA,GAAA,CAAA;AACA,WAAA,IAAA,GAAA,EAAA;AACA,WAAA,MAAA,GAAA,EAAA;AACA,WAAA,SAAA;AACA;AACA,GATA,CAXA;AAsBA,EAAA,OAAA,EAAA;AACA,IAAA,SADA,qBACA,IADA,EACA;AACA,aAAA,QAAA,CAAA,IAAA,CAAA,GAAA,CAAA,IAAA,CAAA,GAAA,GAAA,GAAA,GAAA;AACA,KAHA;AAIA;AACA,IAAA,SALA,uBAKA;AAAA;;AACA,MAAA,eAAA,CAAA;AACA,QAAA,EAAA,EAAA,KAAA,MAAA,CAAA,KAAA,CAAA,IAAA,IAAA,IADA;AAEA,QAAA,IAAA,EAAA,KAAA,IAFA;AAGA,QAAA,MAAA,EAAA,KAAA,MAHA;AAIA,QAAA,KAAA,EAAA,KAAA,KAJA;AAKA,QAAA,IAAA,EAAA,KAAA;AALA,OAAA,CAAA,CAMA,IANA,CAMA,UAAA,MAAA,EAAA;AACA,QAAA,KAAA,CAAA,OAAA,GAAA,KAAA;AACA,QAAA,KAAA,CAAA,MAAA,GAAA,MAAA;AACA,OATA,EASA,KATA,CASA,YAAA;AACA,QAAA,KAAA,CAAA,OAAA,GAAA,KAAA;AACA,QAAA,KAAA,CAAA,MAAA,GAAA,EAAA;AACA,OAZA;AAaA,KAnBA;AAoBA,IAAA,aApBA,yBAoBA,IApBA,EAoBA;AACA,WAAA,OAAA,GAAA,IAAA;AACA,WAAA,IAAA,GAAA,IAAA;AACA,WAAA,SAAA;AACA,KAxBA;AAyBA,IAAA,MAzBA,oBAyBA;AACA,WAAA,OAAA,GAAA,IAAA;AACA,WAAA,IAAA,GAAA,CAAA;AACA,WAAA,SAAA;AACA,KA7BA;AA8BA,IAAA,SA9BA,qBA8BA,KA9BA,EA8BA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,KAAA,CAAA,GAAA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA;AACA,QAAA,IAAA,EAAA,gBADA;AAEA,QAAA,KAAA,EAAA;AAAA,UAAA,EAAA,EAAA,KAAA,CAAA,GAAA,CAAA;AAAA;AAFA,OAAA;AAIA;AApCA,GAtBA;AA4DA,EAAA,OA5DA,qBA4DA;AACA,SAAA,SAAA;AACA;AA9DA,CAAA","sourcesContent":["<template>\r\n  <div class=\"box\">\r\n    <div class=\"filterBox\">\r\n      <select class=\"selectBox\" v-model=\"type\" @change=\"handle\">\r\n        <option value>全部客户</option>\r\n        <option value=\"重点客户\">重点客户</option>\r\n        <option value=\"一般客户\">一般客户</option>\r\n        <option value=\"放弃客户\">放弃客户</option>\r\n      </select>\r\n      <input\r\n        v-model=\"search\"\r\n        type=\"text\"\r\n        class=\"searchInp\"\r\n        placeholder=\"客户综合信息模糊查询\"\r\n        @keydown.enter=\"handle\"\r\n      />\r\n    </div>\r\n\r\n    <div v-if=\"result\">\r\n      <el-table stripe :data=\"result.data\" style=\"width:100%\" v-loading=\"loading\">\r\n        <el-table-column label=\"姓名\" min-width=\"8%\" prop=\"name\"></el-table-column>\r\n        <el-table-column label=\"性别\" min-width=\"5%\" prop=\"sex\" :formatter=\"formatSex\"></el-table-column>\r\n        <el-table-column label=\"邮箱\" min-width=\"10%\" prop=\"email\" show-overflow-tooltip></el-table-column>\r\n        <el-table-column label=\"电话\" min-width=\"10%\" prop=\"phone\" show-overflow-tooltip></el-table-column>\r\n        <el-table-column label=\"微信\" min-width=\"10%\" prop=\"weixin\" show-overflow-tooltip></el-table-column>\r\n        <el-table-column label=\"QQ\" min-width=\"10%\" prop=\"QQ\" show-overflow-tooltip></el-table-column>\r\n        <el-table-column label=\"类型\" min-width=\"10%\" prop=\"type\"></el-table-column>\r\n        <el-table-column label=\"隶属人\" min-width=\"8%\" prop=\"userName\"></el-table-column>\r\n        <el-table-column label=\"地址\" min-width=\"15%\" prop=\"address\" show-overflow-tooltip></el-table-column>\r\n        <el-table-column label=\"操作\" min-width=\"14%\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button type=\"text\" size=\"small\" @click=\"handleCus(scope)\">编辑</el-button>\r\n            <el-button type=\"text\" size=\"small\">删除</el-button>\r\n            <el-button type=\"text\" size=\"small\">回访</el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n\r\n      <el-pagination\r\n        v-if=\"result.total\"\r\n        background\r\n        layout=\"prev, pager, next\"\r\n        :total=\"parseInt(result.total)\"\r\n        :page-size=\"limit\"\r\n        :current-page=\"page\"\r\n        @current-change=\"currentHandle\"\r\n      ></el-pagination>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { queryCustomList } from \"../../api/customer\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      result: null,\r\n      type: \"\",\r\n      search: \"\",\r\n      limit: 10,\r\n      page: 1,\r\n      loading:true\r\n    };\r\n  },\r\n  watch: {\r\n    [\"$route\"](route) {\r\n      if (route.path.includes(\"/custom/list\")) {\r\n        this.loading = true;\r\n        this.page = 1;\r\n        this.type = \"\";\r\n        this.search = \"\";\r\n        this.queryData();\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    formatSex(item) {\r\n      return parseInt(item.sex) == 0 ? \"男\" : \"女\";\r\n    },\r\n    //=>向服务器发送请求，获取经过筛选后的数据\r\n    queryData() {\r\n      queryCustomList({\r\n        lx: this.$route.query.type || \"my\",\r\n        type: this.type,\r\n        search: this.search,\r\n        limit: this.limit,\r\n        page: this.page\r\n      }).then(result => {\r\n        this.loading = false;\r\n        this.result = result;\r\n      }).catch(()=>{\r\n        this.loading = false;\r\n        this.result = {};\r\n      });\r\n    },\r\n    currentHandle(page) {\r\n      this.loading = true;\r\n      this.page = page;\r\n      this.queryData();\r\n    },\r\n    handle() {\r\n      this.loading = true;\r\n      this.page = 1;\r\n      this.queryData();\r\n    },\r\n    handleCus(scope){\r\n      console.log(scope.row);\r\n      this.$router.push({\r\n        path:'/custom/handle',\r\n        query:{id:scope.row.id}\r\n      })\r\n    }\r\n  },\r\n  created() {\r\n    this.queryData();\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.box {\r\n  height: 100%;\r\n  overflow-y: auto;\r\n  overflow-x: hidden;\r\n}\r\n\r\n/* ==filterBox== */\r\n.filterBox {\r\n  padding: 10px;\r\n  text-align: right;\r\n}\r\n\r\n.selectBox,\r\n.searchInp,\r\n.deleteAll {\r\n  box-sizing: border-box;\r\n  margin-right: 10px;\r\n  padding: 0 5px;\r\n  width: 100px;\r\n  height: 30px;\r\n  line-height: 30px;\r\n  border: 1px solid #ccc;\r\n  vertical-align: middle;\r\n}\r\n\r\n.searchInp {\r\n  padding: 0 10px;\r\n  width: 250px;\r\n}\r\n\r\n.deleteAll {\r\n  background: #eee;\r\n  padding: 0;\r\n  cursor: pointer;\r\n}\r\n</style>"],"sourceRoot":"src/pages/Customer"}]}